* Введение:
  * Суть принципа работы протокола на примере почты
  * Принцип работы протокола в сети интернет
  * Сокет
  * Клиентские программы

1 Суть принципа работы протокола на примере почты
-

Принципы работы интернет-протокола\* TCP/IP по своей сути очень просты и сильно
напоминают работу нашей почты.

Вспомните как работает наша обычная почта. Сначала вы на листке пишите письмо,
затем кладете его в конверт, заклеиваете, на обратной стороне конверта пишете
адреса отправителя и получателя, а потом относите в ближайшее почтовое отделение.
Далее письмо проходит через цепочку почтовых отделений до ближайшего почтового
отделения получателя, откуда оно тетей-почтальоном доставляется по указанному
адресу получателя и опускается в его почтовый ящик (с номером его квартиры) или
вручается лично. Все! Письмо дошло до получателя. Когда получатель письма
захочет вам ответить, то он в своем ответном письме поменяет местами адреса получателя
и отправителя, и письмо отправится к вам по той же цепочке, но в обратном направлении.

На конверте письма будет написано примерно следующее:

---------

> **Адрес отправителя:**

> От кого: Иванов Иван Иванович

> Откуда: Ивантеевка, ул. Большая, д. 8, кв 25

> **Адрес получателя:**

> От кого: Петров Петр Петрович

> Откуда: Москва, Усачевский переулок, д. 105, кв. 110

---------

\* <small>Протокол передачи данных - набор соглашений интерфейса\*\* логического уровня, которые определяют
обмен данными между различными программами. Эти соглашения задают единообразный способ передачи
сообщений и обработки ошибок при взаимодействии программного обеспечения разнесенной в
пространстве аппаратуры, соединенной тем или иным интерфейсом.</small>

\*\* <small>[Интерфейс](http://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81) - совокупность средств, методов и правил взаимодействия (управления,
контроля и т.д.) между элементами системы. </small>

2 Принцип работы протокола в сети интернет
-

Теперь мы готовы рассмотреть взаимодействие компьютеров и приложений в сети интернет (да и в локальной сети тоже).
Обратите внимание, что аналогия с обычной почтой будет почти полной.

Каждый компьютер (он же узел, "host") в рамках сети интернет тоже имеет уникальный адрес,
который называется IP (Internet Pointer), например: 209.85.173.104. IP адрес состоит из четырех
десятичных чисел от 0 до 255 (4 байтов), разделенных точкой. Но знать только IP адрес компьютера
еще недостаточно, так как в конечном счете обмениваются информацией не компьютеры сами по себе, а приложения, работающие на них.
А на компьютере может одновременно работать сразу несколько приложений (например почтовый сервер, веб-сервер и пр.).
Для доставки обычного бумажного письма недостаточно знать только адрес дома - необходимо еще
знать номер квартиры. Также и каждое программное приложение имеет подобный номер, именуемый номером
порта. Большинство серверных приложений имеют стандартные номера, например: почтовый
сервис привязан к порту с номером 25 (еще говорят: "слушает" порт, принимает на него
сообщения), веб-сервис привязан к порту 80, FTP - к порту 21 и так далее.

Таким образом имеем следующую практически полную аналогию с нашим обычным почтовым адресом:

---------

> адрес дома = IP компьютера

> номер квартиры = номер порта

---------

В компьютерных сетях, работающих по протоколам TCP/IP, аналогом бумажного письма в конверте
является **пакет**, который содержит собственно передаваемые данные и адресную информацию - адрес
отправителя и адрес получателя, например:

---------

> **Адрес отправителя (Source address):**

> IP: 82.146.49.55

> Port: 2049


> **Адрес получателя (Destination address):**

> IP: 195.34.32.116

> Port: 53


> **Данные паекта:**

> ...

---------

Конечно же в пакетах также присутствует служебная информация, но для понимания сути это
не важно.

3 Сокет
-
Обратите внимание, комбинация: **"IP адрес и номер порта"** - называется **"сокет"**

В нашем примере мы с сокета 82.146.49.55:2049 посылаем пакет на сокет 195.34.32.116:53,
т.е. пакет пойдет на компьютер, имеющий IP адрес 195.34.32.116 и порт 53. А порту 53
соответствует сервер распознавания имен (**DNS-сервер**), который примет этот пакет.
Зная адрес отправителя, этот сервер сможет после обработки нашего запроса сформировать ответный
пакет, который пойдет в обратном направлении на сокет отправителя 82.146.49.55:2049, который
для DNS сервера будет являться сокетом получателя.

Как правило взаимодействие осуществляется по схеме "клиент-сервер": "клиент" запрашивает
какую-либо информацию (например страницу сайта), сервер принимает запрос, обрабатывает его
и посылает результат. Номера портов серверных приложений общеизвестны, например: почтовый
SMTP сервер "слушает" 25-й порт, POP3 сервер, обеспечивающий чтение почты из ваших почтовых
ящиков "слушает" 110-порт, веб-сервер 80-й порт и пр.

4 Клиентские программы
-
Большинство программ на домашнем компьютере являются клиентами - например почтовый
клиент Outlook, веб-обозреваетли FireFox, Chrome и пр.

Номера портов на клиенте не фиксированные как у сервера, а назначаются операционной системой
динамически. Фиксированные серверные порты как правило имеют номера до 1024 (но есть исключения),
а клиентские начинаются после 1024.





<!--vim:set spelllang=ru-->
